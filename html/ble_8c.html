<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CP_CB_Lab6: src/Source_Files/ble.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CP_CB_Lab6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2855980263c52be09af3085e80bd06a7.html">Source_Files</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ble.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains all the functions to interface the application with the HM-18 BLE module and the LEUART driver. Uses a circular buffer to store data going out.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ble.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_b_l_e___c_i_r_c_u_l_a_r___b_u_f.html">BLE_CIRCULAR_BUF</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_i_r_c___t_e_s_t___s_t_r_u_c_t.html">CIRC_TEST_STRUCT</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad8f114959b29521f5e2bb245cc6bf62a"><td class="memItemLeft" align="right" valign="top"><a id="ad8f114959b29521f5e2bb245cc6bf62a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSIZE</b>&#160;&#160;&#160;64</td></tr>
<tr class="separator:ad8f114959b29521f5e2bb245cc6bf62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc350e4303a0a10a159e61556aa1ccdd"><td class="memItemLeft" align="right" valign="top"><a id="afc350e4303a0a10a159e61556aa1ccdd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIRC_TEST_SIZE</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:afc350e4303a0a10a159e61556aa1ccdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af66d95329997b8ba53dd960a02e0b360"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#af66d95329997b8ba53dd960a02e0b360">ble_circ_init</a> (void)</td></tr>
<tr class="memdesc:af66d95329997b8ba53dd960a02e0b360"><td class="mdescLeft">&#160;</td><td class="mdescRight">BLE module.  <a href="ble_8c.html#af66d95329997b8ba53dd960a02e0b360">More...</a><br /></td></tr>
<tr class="separator:af66d95329997b8ba53dd960a02e0b360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e65d8963e8c7dea3b46df37db10a1b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#ab8e65d8963e8c7dea3b46df37db10a1b">ble_circ_push</a> (char *string)</td></tr>
<tr class="memdesc:ab8e65d8963e8c7dea3b46df37db10a1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a packet onto the circular buffer.  <a href="ble_8c.html#ab8e65d8963e8c7dea3b46df37db10a1b">More...</a><br /></td></tr>
<tr class="separator:ab8e65d8963e8c7dea3b46df37db10a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21efac73e77389b6ba0ff8c998a9a915"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#a21efac73e77389b6ba0ff8c998a9a915">ble_circ_space</a> (void)</td></tr>
<tr class="memdesc:a21efac73e77389b6ba0ff8c998a9a915"><td class="mdescLeft">&#160;</td><td class="mdescRight">Space available on circular buffer.  <a href="ble_8c.html#a21efac73e77389b6ba0ff8c998a9a915">More...</a><br /></td></tr>
<tr class="separator:a21efac73e77389b6ba0ff8c998a9a915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75f5c03e1cffa49641485d27f0430aad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#a75f5c03e1cffa49641485d27f0430aad">update_circ_wrtindex</a> (<a class="el" href="struct_b_l_e___c_i_r_c_u_l_a_r___b_u_f.html">BLE_CIRCULAR_BUF</a> *index_struct, uint32_t update_by)</td></tr>
<tr class="memdesc:a75f5c03e1cffa49641485d27f0430aad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update Circular Buffer Write Index.  <a href="ble_8c.html#a75f5c03e1cffa49641485d27f0430aad">More...</a><br /></td></tr>
<tr class="separator:a75f5c03e1cffa49641485d27f0430aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359b00ceee44473c32bdbe4c77104360"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#a359b00ceee44473c32bdbe4c77104360">update_circ_readindex</a> (<a class="el" href="struct_b_l_e___c_i_r_c_u_l_a_r___b_u_f.html">BLE_CIRCULAR_BUF</a> *index_struct, uint32_t update_by)</td></tr>
<tr class="memdesc:a359b00ceee44473c32bdbe4c77104360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update Circular Buffer Read Index.  <a href="ble_8c.html#a359b00ceee44473c32bdbe4c77104360">More...</a><br /></td></tr>
<tr class="separator:a359b00ceee44473c32bdbe4c77104360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c43998996d316bd6984266baa3dabe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#ad9c43998996d316bd6984266baa3dabe">ble_circ_pop</a> (bool test)</td></tr>
<tr class="memdesc:ad9c43998996d316bd6984266baa3dabe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop a packet from the circular buffer.  <a href="ble_8c.html#ad9c43998996d316bd6984266baa3dabe">More...</a><br /></td></tr>
<tr class="separator:ad9c43998996d316bd6984266baa3dabe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcf3d501e1bf39c7b19ea76aad497e2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#abcf3d501e1bf39c7b19ea76aad497e2e">ble_open</a> (uint32_t tx_event, uint32_t rx_event)</td></tr>
<tr class="memdesc:abcf3d501e1bf39c7b19ea76aad497e2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">HM18 BLE Module Init Function.  <a href="ble_8c.html#abcf3d501e1bf39c7b19ea76aad497e2e">More...</a><br /></td></tr>
<tr class="separator:abcf3d501e1bf39c7b19ea76aad497e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ffa7f86d4c671723533817b2ff69306"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#a1ffa7f86d4c671723533817b2ff69306">ble_write</a> (char *string)</td></tr>
<tr class="memdesc:a1ffa7f86d4c671723533817b2ff69306"><td class="mdescLeft">&#160;</td><td class="mdescRight">HM18 BLE Write Function.  <a href="ble_8c.html#a1ffa7f86d4c671723533817b2ff69306">More...</a><br /></td></tr>
<tr class="separator:a1ffa7f86d4c671723533817b2ff69306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ea1429d409f4550e8e3fe5303478ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#a26ea1429d409f4550e8e3fe5303478ea">ble_test</a> (char *mod_name)</td></tr>
<tr class="memdesc:a26ea1429d409f4550e8e3fe5303478ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">BLE Test performs two functions. First, it is a Test Driven Development routine to verify that the LEUART is correctly configured to communicate with the BLE HM-18 module. Second, the input argument passed to this function will be written into the BLE module and become the new name advertised by the module while it is looking to pair.  <a href="ble_8c.html#a26ea1429d409f4550e8e3fe5303478ea">More...</a><br /></td></tr>
<tr class="separator:a26ea1429d409f4550e8e3fe5303478ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16af821940031d2983eae1dadf880b85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble_8c.html#a16af821940031d2983eae1dadf880b85">circular_buff_test</a> (void)</td></tr>
<tr class="memdesc:a16af821940031d2983eae1dadf880b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Circular Buff Test is a Test Driven Development function to validate that the circular buffer implementation.  <a href="ble_8c.html#a16af821940031d2983eae1dadf880b85">More...</a><br /></td></tr>
<tr class="separator:a16af821940031d2983eae1dadf880b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a88b4b0079d2b481512b36688eebc1d5b"><td class="memItemLeft" align="right" valign="top"><a id="a88b4b0079d2b481512b36688eebc1d5b"></a>
static <a class="el" href="struct_c_i_r_c___t_e_s_t___s_t_r_u_c_t.html">CIRC_TEST_STRUCT</a>&#160;</td><td class="memItemRight" valign="bottom"><b>test_struct</b></td></tr>
<tr class="separator:a88b4b0079d2b481512b36688eebc1d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf65811a26d00927fac55b4883869be5"><td class="memItemLeft" align="right" valign="top"><a id="acf65811a26d00927fac55b4883869be5"></a>
static <a class="el" href="struct_b_l_e___c_i_r_c_u_l_a_r___b_u_f.html">BLE_CIRCULAR_BUF</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ble_cbuf</b></td></tr>
<tr class="separator:acf65811a26d00927fac55b4883869be5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains all the functions to interface the application with the HM-18 BLE module and the LEUART driver. Uses a circular buffer to store data going out. </p>
<dl class="section author"><dt>Author</dt><dd></dd></dl>
<dl class="section date"><dt>Date</dt><dd></dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af66d95329997b8ba53dd960a02e0b360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af66d95329997b8ba53dd960a02e0b360">&#9670;&nbsp;</a></span>ble_circ_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ble_circ_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>BLE module. </p>
<p>Initialize Circular Buffer.</p>
<p>This module contains all the functions to interface the application layer with the HM-18 Bluetooth module. The application does not have the responsibility of knowing the physical resources required, how to configure, or interface to the Bluetooth resource including the LEUART driver that communicates with the HM-18 BLE module.</p>
<p>Initializes all values of the private circular buffer being used for LEUART operation.</p>
<dl class="section note"><dt>Note</dt><dd>CSIZE variable defines the size of the buffer. </dd></dl>

</div>
</div>
<a id="ad9c43998996d316bd6984266baa3dabe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c43998996d316bd6984266baa3dabe">&#9670;&nbsp;</a></span>ble_circ_pop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ble_circ_pop </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pop a packet from the circular buffer. </p>
<p>Will get the packet length from the first read index then pull the full packet from the circular buffer. Depending on the passed variable test, the data from the circular buffer will be: -test=true -&gt; stored in test_struce.result_str[] var -test=false -&gt; sent to the HM18 peripheral using leuart_start</p>
<dl class="section note"><dt>Note</dt><dd>Will return true and exit if the TX SM is busy.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">test</td><td>Defines what will happen with the data pulled from the circular buffer. If false, data is sent via LEUART.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns false if data was popped off buffer, true if no data was popped. </dd></dl>

</div>
</div>
<a id="ab8e65d8963e8c7dea3b46df37db10a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8e65d8963e8c7dea3b46df37db10a1b">&#9670;&nbsp;</a></span>ble_circ_push()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ble_circ_push </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Push a packet onto the circular buffer. </p>
<p>Will push the given string onto the circular buffer and update the write index accordingly. The packet header will be the string length. Will not allow circular buffer to overflow.</p>
<dl class="section note"><dt>Note</dt><dd>Will assert false if the circular buffer does not have enough space</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">string</td><td>The string to be pushed onto the circular buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21efac73e77389b6ba0ff8c998a9a915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21efac73e77389b6ba0ff8c998a9a915">&#9670;&nbsp;</a></span>ble_circ_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ble_circ_space </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Space available on circular buffer. </p>
<p>Will return an 8-bit unsigned integer with the amount of space remaining on the circular buffer.</p>
<dl class="section note"><dt>Note</dt><dd>Uses the private circular buffer implemented. Must be initialized prior to calling this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The amount of space available on the circular buffer. </dd></dl>

</div>
</div>
<a id="abcf3d501e1bf39c7b19ea76aad497e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcf3d501e1bf39c7b19ea76aad497e2e">&#9670;&nbsp;</a></span>ble_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_open </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tx_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rx_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HM18 BLE Module Init Function. </p>
<p>This function will open the BLE module by initializing the LEUART peripheral for proper communication witht the HM18.</p>
<dl class="section note"><dt>Note</dt><dd>The passed events will be called at the end of the RX/TX state machine.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_event</td><td>The callback to be added at the end of TX transfer.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_event</td><td>The callback to be added at the end of RX recieve. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26ea1429d409f4550e8e3fe5303478ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26ea1429d409f4550e8e3fe5303478ea">&#9670;&nbsp;</a></span>ble_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ble_test </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mod_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>BLE Test performs two functions. First, it is a Test Driven Development routine to verify that the LEUART is correctly configured to communicate with the BLE HM-18 module. Second, the input argument passed to this function will be written into the BLE module and become the new name advertised by the module while it is looking to pair. </p>
<p>This global function will use polling functions provided by the LEUART driver for both transmit and receive to validate communications with the HM-18 BLE module. For the assignment, the communication with the BLE module must use low energy design principles of being an interrupt driven state machine.</p>
<dl class="section note"><dt>Note</dt><dd>For this test to run to completion, the phone most not be paired with the BLE module. In addition for the name to be stored into the module a breakpoint must be placed at the end of the test routine and stopped at this breakpoint while in the debugger for a minimum of 5 seconds.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*mod_name</td><td>The name that will be written to the HM-18 BLE module to identify it while it is advertising over Bluetooth Low Energy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns bool true if successfully passed through the tests in this function. </dd></dl>

</div>
</div>
<a id="a1ffa7f86d4c671723533817b2ff69306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ffa7f86d4c671723533817b2ff69306">&#9670;&nbsp;</a></span>ble_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_write </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HM18 BLE Write Function. </p>
<p>Adds a string to the circuar buffer and then pops it to begin circular buffer LEUART operation.</p>
<dl class="section note"><dt>Note</dt><dd>LEUART0 peripheral will be used</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">string</td><td>The string that will be written to the HM18 BLE Module </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16af821940031d2983eae1dadf880b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16af821940031d2983eae1dadf880b85">&#9670;&nbsp;</a></span>circular_buff_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circular_buff_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Circular Buff Test is a Test Driven Development function to validate that the circular buffer implementation. </p>
<p>This Test Driven Development test has tests integrated into the function to validate that the routines can successfully identify whether there is space available in the circular buffer, the write and index pointers wrap around, and that one or more packets can be pushed and popped from the circular buffer.</p>
<dl class="section note"><dt>Note</dt><dd>If anyone of these test will fail, an EFM_ASSERT will occur. If the DEBUG_EFM=1 symbol is defined for this project, exiting this function confirms that the push, pop, and the associated utility functions are working.</dd></dl>
<dl class="section user"><dt></dt><dd>There is a test escape that is not possible to test through this function that will need to be verified by writing several <a class="el" href="ble_8c.html#a1ffa7f86d4c671723533817b2ff69306" title="HM18 BLE Write Function.">ble_write()</a>s back to back and verified by checking that these <a class="el" href="ble_8c.html#a1ffa7f86d4c671723533817b2ff69306" title="HM18 BLE Write Function.">ble_write()</a>s were successfully transmitted to the phone app. </dd></dl>

</div>
</div>
<a id="a359b00ceee44473c32bdbe4c77104360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a359b00ceee44473c32bdbe4c77104360">&#9670;&nbsp;</a></span>update_circ_readindex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void update_circ_readindex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_b_l_e___c_i_r_c_u_l_a_r___b_u_f.html">BLE_CIRCULAR_BUF</a> *&#160;</td>
          <td class="paramname"><em>index_struct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>update_by</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update Circular Buffer Read Index. </p>
<p>Updates the circular buffer read index. The read index will be updated by the amount given in 'update_by' and will circle around if neccesary.</p>
<dl class="section note"><dt>Note</dt><dd>Index implementation is used rather than pointer implementation.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*index_struct</td><td>A pointer to the CLE_CIRCULAR_BUF struct to update</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">update_by</td><td>The integer amount to update the BLE read index by. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a75f5c03e1cffa49641485d27f0430aad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75f5c03e1cffa49641485d27f0430aad">&#9670;&nbsp;</a></span>update_circ_wrtindex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void update_circ_wrtindex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_b_l_e___c_i_r_c_u_l_a_r___b_u_f.html">BLE_CIRCULAR_BUF</a> *&#160;</td>
          <td class="paramname"><em>index_struct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>update_by</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update Circular Buffer Write Index. </p>
<p>Updates the circular buffer write index. The write index will update by the amount given in 'update_by' and will circle around if neccesary.</p>
<dl class="section note"><dt>Note</dt><dd>Index implementation is being used rather than pointer implementation</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*index_struct</td><td>A pointer to the CLE_CIRCULAR_BUF struct to update</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">update_by</td><td>The integer amount to update the BLE write index by. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
